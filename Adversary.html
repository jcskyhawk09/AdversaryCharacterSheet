
<input type="text" name="attr_debug" style="display: none" value=" "/>
<input type="text" name="attr_character_sheet" style="display: none" value="Pathfinder_Simple"/>
<div class="top">
  <div class="pfLogo"></div>
  <div class="topStats" style="margin-bottom: 1em">
    <div>
      <div class="labelledUnderlined" style="width: 2.5in">
        <label data-i18n="character-name">Character Name</label>
        <div class="inner">
          <input type="text" name="attr_character_name"/>
        </div>
      </div>
      <div class="labelledUnderlined">
        <label data-i18n="player-name">Player Name</label>
        <div class="inner">
          <input type="text" name="attr_player_name"/>
        </div>
      </div>
    </div>
    <div>
      <div class="labelledUnderlined" style="width: 1in">
        <label data-i18n="race">Race</label>
        <div class="inner">
          <input type="text" name="attr_race"/>
        </div>
      </div>
      <div class="labelledUnderlined" style="width: 1.5in">
        <label data-i18n="classes-and-levels">Classes and levels</label>
        <div class="inner">
          <input type="text" name="attr_classes"/>
        </div>
      </div>
      <div class="labelledUnderlined" style="width: 0.5in">
        <label data-i18n="total-level-abbrev">Total Lv</label>
        <div class="inner">
          <input type="number" name="attr_level"/>
        </div>
      </div>
      <div class="labelledBoxH" style="float: right">
        <label data-i18n="xp-u">XP</label>
        <div class="inner">
          <input type="number" name="attr_xp" style="width: 1in"/>
        </div>
      </div>
    </div>
    <div>
      <div class="labelledUnderlined" style="width: 3in">
        <label data-i18n="active-status-conditions">Active Status Conditions</label>
        <div class="inner">
          <input type="text" name="attr_activeConditions"/>
        </div>
      </div>
      <div class="labelledBoxH" style="float: right">
        <label data-i18n="hp-u">HP</label>
        <div class="inner">
          <div class="fraction">
            <input type="number" name="attr_hp"/><span>/</span>
            <input type="number" name="attr_hp_max"/>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="tabsContainer">
<div>
    <input type='hidden' class='tabstoggle' name='attr_sheetTab'  value='core'  />
    <button class="tabButtons coreButton" type="action" name="act_core">Core</button>
    <button class="tabButtons skillsButton" type="action" name="act_skills">Skills</button>
    <button class="tabButtons specials-featsButton" type="action" name="act_specials-feats">Specials/Feats</button>
    <button class="tabButtons equipmentButton" type="action" name="act_equipment">Equipment</button>
    <button class="tabButtons magicButton" type="action" name="act_magic">Magic</button>
    <button class="tabButtons notesButton" type="action" name="act_notes">Notes</button>
</div>
<input type='hidden' class='tabstoggle' name='attr_sheetTab'  value='core'  />

  <div class="tab core">

    <div class="tabPanel">
      <div class="coreTab">
        <div>
          <div class="inlineBlock" style="vertical-align: top; width: 3.2in">
            <table class="abilityScores">
              <thead>
                <tr>
                  <th data-i18n="ability-name">Ability Name</th>
                  <th data-i18n="base-score">Base Score</th>
                  <th data-i18n="temp-plus-minus">Temp +/-</th>
                  <th data-i18n="modifier">Modifier</th>
                </tr>
              </thead>
              <tbody>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="shortname" data-i18n="str">str</div>
                            <div class="longname" data-i18n="strength">Strength</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=str_mod}} {{result=[[1d20 + @{str_mod}]]}}{{isNotAttack=true}}"></button>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_str" value="10"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_str_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_str_mod"></span></div>
                          <input type="hidden" name="attr_str_mod"/>
                        </td>
                      </tr>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="shortname" data-i18n="dex">dex</div>
                            <div class="longname" data-i18n="dexterity">Dexterity</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=dex_mod}} {{result=[[1d20 + @{dex_mod}]]}}{{isNotAttack=true}}"></button>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_dex" value="10"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_dex_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_dex_mod"></span></div>
                          <input type="hidden" name="attr_dex_mod"/>
                        </td>
                      </tr>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="shortname" data-i18n="con">con</div>
                            <div class="longname" data-i18n="constitution">Constitution</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=con_mod}} {{result=[[1d20 + @{con_mod}]]}}{{isNotAttack=true}}"></button>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_con" value="10"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_con_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_con_mod"></span></div>
                          <input type="hidden" name="attr_con_mod"/>
                        </td>
                      </tr>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="shortname" data-i18n="int">int</div>
                            <div class="longname" data-i18n="intelligence">Intelligence</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=int_mod}} {{result=[[1d20 + @{int_mod}]]}}{{isNotAttack=true}}"></button>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_int" value="10"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_int_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_int_mod"></span></div>
                          <input type="hidden" name="attr_int_mod"/>
                        </td>
                      </tr>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="shortname" data-i18n="wis">wis</div>
                            <div class="longname" data-i18n="wisdom">Wisdom</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=wis_mod}} {{result=[[1d20 + @{wis_mod}]]}}{{isNotAttack=true}}"></button>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_wis" value="10"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_wis_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_wis_mod"></span></div>
                          <input type="hidden" name="attr_wis_mod"/>
                        </td>
                      </tr>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="shortname" data-i18n="cha">cha</div>
                            <div class="longname" data-i18n="charisma">Charisma</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=cha_mod}} {{result=[[1d20 + @{cha_mod}]]}}{{isNotAttack=true}}"></button>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_cha" value="10"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_cha_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_cha_mod"></span></div>
                          <input type="hidden" name="attr_cha_mod"/>
                        </td>
                      </tr>
              </tbody>
            </table>
          </div>
          <div class="inlineBlock" style="vertical-align: top; width: 5in">
            <div>
              <div class="labelledUnderlined" style="width:1in">
                <label data-i18n="gender">Gender</label>
                <div class="inner">
                  <input type="text" name="attr_gender"/>
                </div>
              </div>
              <div class="labelledUnderlined" style="width: 0.6in">
                <label data-i18n="age">Age</label>
                <div class="inner">
                  <input type="text" name="attr_age"/>
                </div>
              </div>
              <div class="labelledUnderlined" style="width: 0.7in">
                <label data-i18n="bio-height">Height</label>
                <div class="inner">
                  <input type="text" name="attr_height"/>
                </div>
              </div>
              <div class="labelledUnderlined" style="width: 0.7in">
                <label data-i18n="bio-weight">Weight</label>
                <div class="inner">
                  <input type="text" name="attr_weight"/>
                </div>
              </div>
              <div class="labelledUnderlined" style="width: 1.2in">
                <label>Size</label>
                <div class="inner">
                  <select name="attr_size">
                    <option data-i18n="choose-one">Choose One </option>
                    <option value="-8" data-i18n="colossal">Colossal</option>
                    <option value="-4" data-i18n="gargantuan">Gargantuan</option>
                    <option value="-2" data-i18n="huge">Huge</option>
                    <option value="-1" data-i18n="large">Large</option>
                    <option value="0" data-i18n="medium">Medium</option>
                    <option value="1" data-i18n="small">Small</option>
                    <option value="2" data-i18n="tiny">Tiny</option>
                    <option value="4" data-i18n="diminuitive">Diminuitive</option>
                    <option value="8" data-i18n="fine">Fine</option>
                  </select>
                </div>
              </div>
            </div>
            <div>
              <div class="labelledUnderlined">
                <label data-i18n="homeland">Homeland</label>
                <div class="inner">
                  <input type="text" name="attr_homeland"/>
                </div>
              </div>
              <div class="labelledUnderlined" style="width: 1.5in">
                <label data-i18n="deity">Deity</label>
                <div class="inner">
                  <input type="text" name="attr_deity"/>
                </div>
              </div>
              <div class="labelledUnderlined" style="width: 1.2in">
                <label data-i18n="alignment">Alignment</label>
                <div class="inner">
                  <select name="attr_alignment">
                    <option value="LG" data-i18n="lawful-good">Lawful Good</option>
                    <option value="NG" data-i18n="neutral-good">Neutral Good</option>
                    <option value="CG" data-i18n="chaotic-good">Chaotic Good</option>
                    <option value="LN" data-i18n="lawful-neutral">Lawful Neutral</option>
                    <option value="N" data-i18n="neutral">Neutral</option>
                    <option value="CN" data-i18n="chaotic-neutral">Chaotic Neutral</option>
                    <option value="LE" data-i18n="lawful-evil">Lawful Evil</option>
                    <option value="NE" data-i18n="neutral-evil">Neutral Evil</option>
                    <option value="CE" data-i18n="chaotic-evil">Chaotic Evil</option>
                  </select>
                </div>
              </div>
            </div>
            <div>
              <div class="labelledUnderlined" style="width: 100%">
                <label data-i18n="factions">Factions</label>
                <div class="inner">
                  <input type="text" name="attr_factions"/>
                </div>
              </div>
            </div>
            <div>
              <div class="floatLeft">
                <div class="labelledAbove" style="width: 3in">
                  <label data-i18n="appearance">Appearance</label>
                  <div class="inner">
                    <textarea name="attr_appearance" style="height: 1.2in"></textarea>
                  </div>
                </div>
              </div>
              <div class="floatRight">
                <div class="labelledAbove" style="width: 1.8in">
                  <label data-i18n="languages">Languages</label>
                  <div class="inner">
                    <textarea name="attr_languages" style="height: 1.2in"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div style="height: 0.6in">
          <div class="floatLeft">
            <div class="inlineBlock initiative">
              <div class="inlineBlock" style="vertical-align: middle">
                <div class="blackBox">
                  <div class="rollButton">
                    <div class="shortname" data-i18n="initiative">Initiative</div>
                    <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=init}} {{result=[[1d20 + @{init}]]}}{{isNotAttack=true}}{{notes=@{init_notes}}}"></button>
                  </div>
                </div>
                <div class="labelledUnderlined">
                  <label data-i18n="total">Total</label>
                  <div class="inner">
                    <div class="readOnlyBox"><span name="attr_init"></span></div>
                    <input type="hidden" name="attr_init"/>
                  </div>
                </div>
                <div class="mathOperator">= </div>
                <div class="labelledUnderlined">
                  <label data-i18n="dex-mod">Dex mod</label>
                  <div class="inner">
                    <div class="readOnlyBox"><span name="attr_dex_mod"></span></div>
                    <input type="hidden" name="attr_dex_mod"/>
                  </div>
                </div>
                <div class="mathOperator">+</div>
                <div class="fieldBox">
                  <label data-i18n="misc">Misc</label>
                  <div class="inner">
                    <input type="number" name="attr_init_misc" value="0"/>
                  </div>
                </div>
              </div>
              <div class="labelledUnderlined" style="margin-left: 1em; width: 1in">
                <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
                <div class="inner">
                  <input type="text" name="attr_init_notes"/>
                </div>
              </div>
            </div>
          </div>
          <div class="floatRight">
            <div class="labelledBoxV" style="vertical-align: top">
              <label data-i18n="movement-amp-speeds">Movement &amp; Speeds</label>
              <div class="inner">
                <input type="text" name="attr_movement" style="width: 1.8in"/>
              </div>
            </div>
            <div class="labelledBoxV" style="vertical-align: top">
              <label data-i18n="senses">Senses</label>
              <div class="inner">
                <input type="text" name="attr_senses" style="width: 1.8in"/>
              </div>
            </div>
          </div>
        </div>
        <h3 data-i18n="defenses">Defenses</h3>
        <div>
          <div class="ac">
            <div class="inlineBlock" style="vertical-align: middle">
              <div class="blackBox">
                <div class="shortname" data-i18n="armor-class-abbrev-u">AC</div>
                <div class="longname" data-i18n="armor-class">Armor Class</div>
              </div>
              <div class="labelledUnderlined">
                <label data-i18n="total">Total</label>
                <div class="inner">
                  <div class="readOnlyBox"><span name="attr_ac"></span></div>
                  <input type="hidden" name="attr_ac"/>
                </div>
              </div>
              <div class="mathOperator">= 10 +</div>
              <div class="fieldBox">
                <label data-i18n="equipment">Equipment</label>
                <div class="inner">
                  <input type="number" name="attr_ac_equipment" value="0"/>
                </div>
              </div>
              <div class="mathOperator">+</div>
              <div class="labelledUnderlined">
                <label data-i18n="dex-mod">Dex mod</label>
                <div class="inner">
                  <div class="readOnlyBox"><span name="attr_dex_mod"></span></div>
                  <input type="hidden" name="attr_dex_mod"/>
                </div>
              </div>
              <div class="mathOperator">+</div>
              <div class="labelledUnderlined">
                <label data-i18n="size">Size</label>
                <div class="inner">
                  <div class="readOnlyBox"><span name="attr_size"></span></div>
                  <input type="hidden" name="attr_size"/>
                </div>
              </div>
              <div class="mathOperator">+</div>
              <div class="fieldBox">
                <label data-i18n="misc">Misc</label>
                <div class="inner">
                  <input type="number" name="attr_ac_misc" value="0"/>
                </div>
              </div>
              <div class="mathOperator">+</div>
              <div class="fieldBox">
                <label data-i18n="temp">Temp</label>
                <div class="inner">
                  <input type="number" name="attr_ac_temp" value="0"/>
                </div>
              </div>
            </div>
            <div class="labelledUnderlined" style="margin-left: 1em; width: 3in">
              <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
              <div class="inner">
                <input type="text" name="attr_ac_notes"/>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div class="inlineBlock" style="float: left">
            <div style="vertical-align: middle">
              <div>
                <div class="labelledBoxH" style="width: 1.4in">
                  <label data-i18n="touch">Touch</label>
                  <div class="inner">
                    <div class="readOnlyBox" style="width: 0.25in"><span name="attr_ac_touch"></span></div>
                    <input type="hidden" name="attr_ac_touch"/>
                  </div>
                </div>
              </div>
              <div>
                <div class="labelledBoxH" style="width: 1.4in">
                  <label data-i18n="flat-footed">Flat-Footed</label>
                  <div class="inner">
                    <div class="readOnlyBox" style="width: 0.25in"><span name="attr_ac_flatfoot"></span></div>
                    <input type="hidden" name="attr_ac_flatfoot"/>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="inlineBlock" style="float: right">
            <div style="vertical-align: middle">
              <div class="labelledBoxV" style="width: .6in">
                <label data-i18n="ac-dex-max">AC Dex Max</label>
                <div class="inner">
                  <input type="text" name="attr_ac_dex_max" value="99"/>
                </div>
              </div>
              <div class="labelledBoxV" style="width: 1in">
                <label data-i18n="damage-reduction">Damage Reduction</label>
                <div class="inner">
                  <input type="text" name="attr_damage_reduction"/>
                </div>
              </div>
              <div class="labelledBoxV" style="width: 1in">
                <label data-i18n="spell-resistance">Spell Resistance</label>
                <div class="inner">
                  <input type="number" name="attr_spell_resistance"/>
                </div>
              </div>
              <div class="inlineBlock" style="vertical-align: top">
                <div>
                  <div class="labelledBoxH" style="width: 4in">
                    <label data-i18n="resistances">Resistances</label>
                    <div class="inner">
                      <input type="text" name="attr_resistances" style="width: 2.9in"/>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="labelledBoxH" style="width: 4in">
                    <label data-i18n="immunities">Immunities</label>
                    <div class="inner">
                      <input type="text" name="attr_immunities" style="width: 2.9in"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div class="inlineBlock">
            <table class="savingThrows">
              <thead>
                <tr>
                  <th data-i18n="saving-throws">Saving Throws</th>
                  <th data-i18n="gm">GM</th>
                  <th data-i18n="total">Total</th>
                  <th></th>
                  <th data-i18n="base-save">Base Save</th>
                  <th></th>
                  <th data-i18n="ability-mod">Ability Mod</th>
                  <th></th>
                  <th data-i18n="equipment">Equipment</th>
                  <th></th>
                  <th data-i18n="misc-plus-minus">Misc +/-</th>
                  <th></th>
                  <th data-i18n="temp-plus-minus">Temp +/-</th>
                  <th style="width: 30%"></th>
                </tr>
              </thead>
              <tbody>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="saveName" data-i18n="fortitude">Fortitude</div>
                            <div class="abilityName" data-i18n="constitution">Constitution</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=fort}} {{result=[[1d20 + @{fort}]]}}{{isNotAttack=true}}{{notes=@{fort_notes}}}"></button>
                          </div>
                        </td>
                        <td>
                          <span data-i18n="gm-roll-b"></span>
                          <button type="roll" value="/w gm &amp;{template:pf} {{charName=@{character_name}}} {{attr=fort}} {{result=[[1d20 + @{fort}]]}}{{isNotAttack=true}}{{notes=@{fort_notes}}}"></button>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_fort"></span></div>
                          <input type="hidden" name="attr_fort"/>
                        </td>
                        <td>
                          <div class="mathOperator">=</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_fort_base" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_con_mod"></span></div>
                          <input type="hidden" name="attr_con_mod"/>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_fort_equipment" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_fort_misc" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_fort_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="labelledUnderlined" style="margin-left: 1em; width: 100%">
                            <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
                            <div class="inner">
                              <input type="text" name="attr_fort_notes"/>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="saveName" data-i18n="reflex">Reflex</div>
                            <div class="abilityName" data-i18n="dexterity">Dexterity</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=ref}} {{result=[[1d20 + @{ref}]]}}{{isNotAttack=true}}{{notes=@{ref_notes}}}"></button>
                          </div>
                        </td>
                        <td>
                          <span data-i18n="gm-roll-b"></span>
                          <button type="roll" value="/w gm &amp;{template:pf} {{charName=@{character_name}}} {{attr=ref}} {{result=[[1d20 + @{ref}]]}}{{isNotAttack=true}}{{notes=@{ref_notes}}}"></button>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_ref"></span></div>
                          <input type="hidden" name="attr_ref"/>
                        </td>
                        <td>
                          <div class="mathOperator">=</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_ref_base" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_dex_mod"></span></div>
                          <input type="hidden" name="attr_dex_mod"/>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_ref_equipment" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_ref_misc" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_ref_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="labelledUnderlined" style="margin-left: 1em; width: 100%">
                            <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
                            <div class="inner">
                              <input type="text" name="attr_ref_notes"/>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td class="blackBox">
                          <div class="rollButton">
                            <div class="saveName" data-i18n="will">Will</div>
                            <div class="abilityName" data-i18n="wisdom">Wisdom</div>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=will}} {{result=[[1d20 + @{will}]]}}{{isNotAttack=true}}{{notes=@{will_notes}}}"></button>
                          </div>
                        </td>
                        <td>
                          <span data-i18n="gm-roll-b"></span>
                          <button type="roll" value="/w gm &amp;{template:pf} {{charName=@{character_name}}} {{attr=will}} {{result=[[1d20 + @{will}]]}}{{isNotAttack=true}}{{notes=@{will_notes}}}"></button>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_will"></span></div>
                          <input type="hidden" name="attr_will"/>
                        </td>
                        <td>
                          <div class="mathOperator">=</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_will_base" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="readOnlyBox"><span name="attr_wis_mod"></span></div>
                          <input type="hidden" name="attr_wis_mod"/>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_will_equipment" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_will_misc" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="mathOperator">+</div>
                        </td>
                        <td>
                          <div class="fieldBox">
                            <div class="inner">
                              <input type="number" name="attr_will_temp" value="0"/>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="labelledUnderlined" style="margin-left: 1em; width: 100%">
                            <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
                            <div class="inner">
                              <input type="text" name="attr_will_notes"/>
                            </div>
                          </div>
                        </td>
                      </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div>
          <h3 data-i18n="attacks">Attacks</h3>
          <div class="labelledBoxH">
            <label data-i18n="base-attack-bonus">Base Attack Bonus</label>
            <div class="inner">
              <input type="number" name="attr_bab" value="0"/>
            </div>
          </div>
          <div class="inlineBlock" style="margin-bottom: 1em; vertical-align: top">
            <div class="attacks">
              <div class="head">
                <label class="inlineBlock" style="padding-left: 3in; width: 0.55in" data-i18n="total">Total</label>
                <label class="inlineBlock" style="width: 0.4in" data-i18n="bab-u">BAB</label>
                <label class="inlineBlock" style="width: 0.4in" data-i18n="ability-mod">Ability Mod</label>
                <label class="inlineBlock" style="width: 0.4in" data-i18n="size">Size</label>
                <label class="inlineBlock" style="width: 0.6in" data-i18n="equipment">Equipment</label>
                <label class="inlineBlock" style="width: 0.65in" data-i18n="misc-plus-minus">Misc +/-</label>
                <label class="inlineBlock" data-i18n="temp-plus-minus">Temp +/-</label>
              </div>
              <div class="body" style="width: 8.5in">
                <fieldset class="repeating_attacks">
                        <div class="inlineBlock blackBox" style="height: 0.5in; vertical-align: top; width: 0.5in">
                          <div class="rollButton"><span>t</span>
                            <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=@{attack_name}}} {{result=[[1d20cs&gt;@{attack_critRange} + @{attack}]]}} {{damage=[[@{attack_damage}]]}} {{critConfirm=[[1d20cs&gt;20 + @{attack}]]}} {{critMultiplier=@{attack_critMultiplier}}}{{isAttack=true}}{{notes=@{attack_notes}}}"></button>
                          </div>
                        </div>
                        <div class="inlineBlock" style="margin-bottom: 1em; width: 7.8in">
                          <div style="margin-bottom: 2px">
                            <div class="inlineBlock blackBox">
                              <input type="text" name="attr_attack_name" placeholder="Attack name" data-i18n-placeholder="attack-name-place"/>
                            </div>
                            <div class="readOnlyBox"><span name="attr_attack"></span></div>
                            <input type="hidden" name="attr_attack"/>
                            <div class="mathOperator">=</div>
                            <div class="readOnlyBox" style="width: 0.25in"><span name="attr_attack_bab"></span></div>
                            <input type="hidden" name="attr_attack_bab"/>
                            <div class="mathOperator">+</div>
                            <div class="atkAbility">
                              <div class="readOnlyBox" style="width: 0.25in"><span name="attr_attack_ability_mod"></span></div>
                              <input type="hidden" name="attr_attack_ability_mod"/>
                              <select name="attr_attack_ability">
                                <option value="Choose One" data-i18n="choose-one">Choose One</option>
                                <option value="str" data-i18n="str-u">STR</option>
                                <option value="dex" data-i18n="dex-u">DEX</option>
                                <option value="con" data-i18n="con-u">CON</option>
                                <option value="int" data-i18n="int-u">INT</option>
                                <option value="wis" data-i18n="wis-u">WIS</option>
                                <option value="cha" data-i18n="cha-u">CHA</option>
                              </select>
                            </div>
                            <div class="mathOperator">+</div>
                            <div class="readOnlyBox" style="width: 0.25in"><span name="attr_attack_size"></span></div>
                            <input type="hidden" name="attr_attack_size"/>
                            <div class="mathOperator">+</div>
                            <div class="fieldBox">
                              <div class="inner">
                                <input type="number" name="attr_attack_equipment" value="0"/>
                              </div>
                            </div>
                            <div class="mathOperator">+</div>
                            <div class="fieldBox">
                              <div class="inner">
                                <input type="number" name="attr_attack_misc" value="0"/>
                              </div>
                            </div>
                            <div class="mathOperator">+</div>
                            <div class="fieldBox">
                              <div class="inner">
                                <input type="number" name="attr_attack_temp" value="0"/>
                              </div>
                            </div>
                          </div>
                          <div>
                            <div class="labelledBoxH">
                              <label data-i18n="damage">Damage</label>
                              <div class="inner">
                                <input type="text" name="attr_attack_damage" style="width: 1.5in" value="0"/>
                              </div>
                            </div>
                            <div class="labelledUnderlined" style="width: 0.8in">
                              <label data-i18n="crit-range">Crit Range</label>
                              <div class="inner">
                                <select name="attr_attack_critRange">
                                  <option value="99" selected="selected" data-i18n="choose-one">Choose One</option>
                                  <option value="20">20</option>
                                  <option value="19">19-20</option>
                                  <option value="18">18-20</option>
                                  <option value="17">17-20</option>
                                  <option value="16">16-20</option>
                                  <option value="15">15-20</option>
                                  <option value="14">14-20</option>
                                  <option value="13">13-20</option>
                                  <option value="12">12-20</option>
                                  <option value="11">11-20</option>
                                  <option value="10">10-20</option>
                                  <option value="9">9-20</option>
                                  <option value="8">8-20</option>
                                  <option value="7">7-20</option>
                                  <option value="6">6-20</option>
                                  <option value="5">5-20</option>
                                  <option value="4">4-20</option>
                                  <option value="3">3-20</option>
                                  <option value="2">2-20</option>
                                </select>
                              </div>
                            </div>
                            <div class="labelledUnderlined" style="width: 0.8in">
                              <label data-i18n="crit-multiplier">Crit Multiplier</label>
                              <div class="inner">
                                <input type="number" name="attr_attack_critMultiplier"/>
                              </div>
                            </div>
                            <div class="labelledUnderlined" style="margin-left: 1em; width: 3in">
                              <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
                              <div class="inner">
                                <input type="text" name="attr_attack_notes"/>
                              </div>
                            </div>
                          </div>
                        </div>
                </fieldset>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div class="cmb">
            <div class="blackBox" style="width: 1in">
              <div class="rollButton">
                <div class="shortname" data-i18n="cmb-u">CMB</div>
                <div class="longname" data-i18n="combat-maneuver-bonus">Combat Maneuver Bonus</div>
                <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=cmb}} {{result=[[1d20 + @{cmb}]]}}{{isNotAttack=true}}"></button>
              </div>
            </div>
            <div class="labelledUnderlined">
              <label data-i18n="total">Total</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_cmb"></span></div>
                <input type="hidden" name="attr_cmb"/>
              </div>
            </div>
            <div class="mathOperator">=</div>
            <div class="labelledUnderlined">
              <label data-i18n="bab-u">BAB</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_bab"></span></div>
                <input type="hidden" name="attr_bab"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="labelledUnderlined">
              <label data-i18n="str-mod">Str mod</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_str_mod"></span></div>
                <input type="hidden" name="attr_str_mod"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="labelledUnderlined">
              <label data-i18n="size">Size</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_cmb_size"></span></div>
                <input type="hidden" name="attr_cmb_size"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="fieldBox">
              <label data-i18n="misc">Misc</label>
              <div class="inner">
                <input type="number" name="attr_cmb_misc" value="0"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="fieldBox">
              <label data-i18n="temp">Temp</label>
              <div class="inner">
                <input type="number" name="attr_cmb_temp" value="0"/>
              </div>
            </div>
            <div class="labelledUnderlined" style="margin-left: 1em; width: 2.6in">
              <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
              <div class="inner">
                <input type="text" name="attr_cmb_notes"/>
              </div>
            </div>
          </div>
          <div class="cmd">
            <div class="blackBox" style="width: 1in">
              <div class="shortname" data-i18n="cmd-u">CMD</div>
              <div class="longname" data-i18n="combat-maneuver-defense">Combat Maneuver Defense</div>
            </div>
            <div class="labelledUnderlined">
              <label data-i18n="total">Total</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_cmd"></span></div>
                <input type="hidden" name="attr_cmd"/>
              </div>
            </div>
            <div class="mathOperator">= 10 +</div>
            <div class="labelledUnderlined">
              <label data-i18n="bab">BAB</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_bab"></span></div>
                <input type="hidden" name="attr_bab"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="labelledUnderlined">
              <label data-i18n="str-mod">Str mod</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_str_mod"></span></div>
                <input type="hidden" name="attr_str_mod"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="labelledUnderlined">
              <label data-i18n="dex-mod">Dex mod</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_dex_mod"></span></div>
                <input type="hidden" name="attr_dex_mod"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="labelledUnderlined">
              <label data-i18n="size">Size</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_cmd_size"></span></div>
                <input type="hidden" name="attr_cmd_size"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="fieldBox">
              <label data-i18n="misc">Misc</label>
              <div class="inner">
                <input type="number" name="attr_cmd_misc" value="0"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="fieldBox">
              <label data-i18n="temp">Temp</label>
              <div class="inner">
                <input type="number" name="attr_cmd_temp" value="0"/>
              </div>
            </div>
            <div class="labelledUnderlined" style="margin-left: 1em">
              <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
              <div class="inner">
                <input type="text" name="attr_cmd_notes"/>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tab skills">
    <div class="tabPanel">
      <div class="skillsTab">
        <div class="labelledBoxH">
          <label data-i18n="armor-penalty">Armor Penalty</label>
          <div class="inner">
            <input type="number" name="attr_armor_penalty" value="0"/>
            
          </div>
        </div>
        <div class="skillsHead">
          <label class="inlineBlock" style="width: 0.3in" data-i18n="class-skill-q">Class Skill?</label>
          <label class="inlineBlock" style="width: 0.3in" data-i18n="acp-skill-q">ACP</label>
          <label class="inlineBlock" style="width: 1.27in"></label>
          <label class="inlineBlock" style="width: .35in" data-i18n="gm">GM</label>
          <label class="inlineBlock" style="width: 0.75in" data-i18n="total">Total</label>
          <label class="inlineBlock" style="width: 0.75in"></label>
          <label class="inlineBlock" style="width: 0.75in" data-i18n="ranks">Ranks</label>
          <label class="inlineBlock" style="width: 0.75in" data-i18n="skill-nat-20-1">20/1</label>
          <label class="inlineBlock" style="width: 0.75in" data-i18n="misc">Misc</label>
          <label class="inlineBlock" style="width: 2in" data-i18n="notes">Notes</label>
        </div>

        <div class="skillsBody">
          <fieldset class="repeating_skills">
            <div class="skill" style="width: 8.5in">
              <div class="inlineBlock" style="text-align: center; width: 0.25in">
                <input type="checkbox" name="attr_skill_class" value="1"/>
              </div>
              <div class="inlineBlock" style="text-align: center; width: 0.25in">
                <input type="checkbox" name="attr_skill_ACP" value="1"/>
              </div>
              <div class="inlineBlock" style="width: 1.3in">
                <div class="name blackBox">
                  <div class="rollButton">
                    <button type="roll" value="&amp;{template:pf} {{charName=@{character_name}}} {{attr=@{skill_name}}} {{result=[[1d20 + @{skill}]]}}{{isNotAttack=true}}{{notes=@{skill_notes}}}"></button>
                    <div class="labelledUnderlined" style="width: 1in">
                      <label></label>
                      <div class="inner">
                        <input type="text" name="attr_skill_name" placeholder="Skill Name" data-i18n-placeholder="skill-name-place"/>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="inlineBlock" style="width: .35in">
                <div class="">
                  <div class=""><span data-i18n="gm-roll-b"></span>
                    <button type="roll" value="/w gm &amp;{template:pf} {{charName=@{character_name}}} {{attr=@{skill_name}}} {{result=[[1d20 + @{skill}]]}}{{isNotAttack=true}}{{notes=@{skill_notes}}}"></button>
                  </div>
                </div>
              </div>

              <div class="inlineBlock" style="width: 0.75in">
                <div class="labelledUnderlined">
                  <label></label>
                  <div class="inner">
                    <div class="readOnlyBox"><span name="attr_skill"></span></div>
                    <input type="hidden" name="attr_skill"/>
                  </div>
                </div>
                <div class="mathOperator">=</div>
              </div>

              <div class="inlineBlock" style="width: 0.75in">
                <div class="labelledUnderlined" style="width: 0.5in">
                  <label></label>
                  <div class="inner">
                    <div class="skillAbility">
                      <div class="readOnlyBox"><span name="attr_skill_ability_mod"></span></div>
                      <input type="hidden" name="attr_skill_ability_mod"/>
                      <select name="attr_skill_ability">
                        <option value="Choose One" data-i18n="choose-one">Choose One</option>
                        <option value="str" data-i18n="str-us">STR</option>
                        <option value="dex" data-i18n="dex-us">DEX</option>
                        <option value="con" data-i18n="con-us">CON</option>
                        <option value="int" data-i18n="int-us">INT</option>
                        <option value="wis" data-i18n="wis-us">WIS</option>
                        <option value="cha" data-i18n="cha-us">CHA</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="mathOperator">+</div>
              </div>

              <div class="inlineBlock" style="width: 0.75in">
                <div class="labelledUnderlined" style="width: 0.5in">
                  <label></label>
                  <div class="inner">
                    <input type="number" name="attr_skill_ranks" value="0"/>
                  </div>
                </div>
                <div class="mathOperator">+</div>
              </div>
              <div class="inlineBlock" style="width: 0.75in">
                <div class="labelledUnderlined" style="width: 0.5in">
                  <label></label>
                  <div class="inner">
                    <input type="number" name="attr_skill_doubles" value="0"/>
                  </div>
                </div>
                <div class="mathOperator">+</div>
              </div>
              <div class="inlineBlock" style="width: 0.75in">
                <div class="labelledUnderlined" style="width: 0.5in">
                  <label></label>
                  <div class="inner">
                    <input type="number" name="attr_skill_misc" value="0"/>
                  </div>
                </div>
                <div class="mathOperator">+</div>
              </div>
              <div class="labelledUnderlined" style="width: 2.2in">
                <label></label>
                <div class="inner">
                  <input type="text" name="attr_skill_notes"/>
                </div>
              </div>
            </div>
          </fieldset>
          <button	title="" class="" type="action" name="act_skillImport">Import Skills</button>
          <button	title="" class="" type="action" name="act_addAllSkills">Add All Skills</button>
          
      
        </div>
      </div>
    </div>
  </div>
  <div class="tab specials-feats">
    <div class="tabPanel">
      <div class="specialFeatsTab">
        <div class="inlineBlock" style="float: left; width: 45%">
          <h2 data-i18n="racial-abilities">Racial Abilities</h2>
          <fieldset class="repeating_raceabilities">
            <div class="card specialAbility">
              <div class="head">
                <div class="name">
                  <input type="text" name="attr_name" placeholder="Ability name" data-i18n-placeholder="ability-name-place"/>
                </div>
                <div class="labelledBoxH uses">
                  <label data-i18n="uses">Uses</label>
                  <div class="inner">
                    <div class="fraction">
                      <input type="number" name="attr_uses"/><span>/</span>
                      <input type="number" name="attr_uses_max"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="body">
                <div class="description">
                  <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                </div>
              </div>
            </div>
          </fieldset>
          <h2 data-i18n="class-abilities">Class Abilities</h2>
          <fieldset class="repeating_classabilities">
            <div class="card specialAbility">
              <div class="head">
                <div class="name">
                  <input type="text" name="attr_name" placeholder="Ability name" data-i18n-placeholder="ability-name-place"/>
                </div>
                <div class="labelledBoxH uses">
                  <label data-i18n="uses">Uses</label>
                  <div class="inner">
                    <div class="fraction">
                      <input type="number" name="attr_uses"/><span>/</span>
                      <input type="number" name="attr_uses_max"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="body">
                <div class="description">
                  <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                </div>
              </div>
            </div>
          </fieldset>
          <h2 data-i18n="other-abilities">Other Abilities</h2>
          <fieldset class="repeating_otherabilities">
            <div class="card specialAbility">
              <div class="head">
                <div class="name">
                  <input type="text" name="attr_name" placeholder="Ability name" data-i18n-placeholder="ability-name-place"/>
                </div>
                <div class="labelledBoxH uses">
                  <label data-i18n="uses">Uses</label>
                  <div class="inner">
                    <div class="fraction">
                      <input type="number" name="attr_uses"/><span>/</span>
                      <input type="number" name="attr_uses_max"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="body">
                <div class="description">
                  <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="inlineBlock" style="float: right; width: 45%">
          <h2 data-i18n="feats">Feats</h2>
          <fieldset class="repeating_feats">
            <div class="card feat">
              <div class="head">
                <div class="labelledBoxH level">
                  <label data-i18n="level-abbrev">Lv</label>
                  <div class="inner">
                    <select name="attr_level" style="width: 0.5in">
                      <option value="1">1</option>
                      <option value="3">3</option>
                      <option value="5">6</option>
                      <option value="7">9</option>
                      <option value="9">12</option>
                      <option value="11">15</option>
                      <option value="13">18</option>
                      <option value="b" data-i18n="bonus">bonus</option>
                    </select>
                  </div>
                </div>
                <div class="name">
                  <input type="text" name="attr_name" placeholder="Feat name" style="width: 2.8in" data-i18n-placeholder="feat-name-place"/>
                </div>
              </div>
              <div class="body">
                <div class="description">
                  <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                </div>
              </div>
            </div>
          </fieldset>
          <h2 data-i18n="traits">Traits</h2>
          <fieldset class="repeating_traits">
            <div class="card trait">
              <div class="head">
                <div class="name">
                  <input type="text" name="attr_name" placeholder="Trait name" data-i18n-placeholder="trait-name-place"/>
                </div>
              </div>
              <div class="body">
                <div class="description">
                  <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                </div>
              </div>
            </div>
          </fieldset>
          <h2 data-i18n="favored-class-options">Favored Class Options</h2>
          <div class="card">
            <div class="body">
              <textarea name="attr_favoredClassOptions" style="height: 3in"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tab equipment">
    <div class="tabPanel">
      <div class="gearTab">
        <div class="specialGear">
          <h2 data-i18n="special-gear">Special Gear</h2>
          <fieldset class="repeating_specialGear">
            <div class="card specialItem">
              <div class="head">
                <div class="name">
                  <input type="text" name="attr_name" placeholder="Item name" style="width: 2.3in" data-i18n-placeholder="item-name-place"/>
                </div>
                <div class="floatRight">
                  <div class="labelledBoxH type">
                    <label data-i18n="type">Type</label>
                    <div class="inner">
                      <select name="attr_type" style="width: 1in">
                        <option value="{&quot;i18n&quot;:&quot;main-hand&quot;}">Main hand</option>
                        <option value="{&quot;i18n&quot;:&quot;off-hand&quot;}">Off hand</option>
                        <option value="{&quot;i18n&quot;:&quot;armor&quot;}">Armor</option>
                        <option value="{&quot;i18n&quot;:&quot;belt&quot;}">Belt</option>
                        <option value="{&quot;i18n&quot;:&quot;body&quot;}">Body</option>
                        <option value="{&quot;i18n&quot;:&quot;chest&quot;}">Chest</option>
                        <option value="{&quot;i18n&quot;:&quot;eyes&quot;}">Eyes</option>
                        <option value="{&quot;i18n&quot;:&quot;feet&quot;}">Feet</option>
                        <option value="{&quot;i18n&quot;:&quot;hands&quot;}">Hands</option>
                        <option value="{&quot;i18n&quot;:&quot;head&quot;}">Head</option>
                        <option value="{&quot;i18n&quot;:&quot;headband&quot;}">Headband</option>
                        <option value="{&quot;i18n&quot;:&quot;neck&quot;}">Neck</option>
                        <option value="{&quot;i18n&quot;:&quot;ring-one&quot;}">Ring 1</option>
                        <option value="{&quot;i18n&quot;:&quot;ring-two&quot;}">Ring 2</option>
                        <option value="{&quot;i18n&quot;:&quot;shield&quot;}">Shield</option>
                        <option value="{&quot;i18n&quot;:&quot;shoulders&quot;}">Shoulders</option>
                        <option value="{&quot;i18n&quot;:&quot;wrists&quot;}">Wrists</option>
                        <option value="{&quot;i18n&quot;:&quot;other&quot;}">Other</option>
                        <option value="{&quot;i18n&quot;:&quot;consumable&quot;}">Consumable</option>
                        <option value="{&quot;i18n&quot;:&quot;slotless&quot;}">Slotless</option>
                      </select>
                    </div>
                  </div>
                  <div class="labelledBoxH count">
                    <label data-i18n="count">Count</label>
                    <div class="inner">
                      <input type="number" name="attr_count" style="width: 0.5in"/>
                    </div>
                  </div>
                </div>
              </div>
              <div class="body">
                <div class="description">
                  <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="mundaneGear">
          <h2 data-i18n="mundane-gear">Mundane Gear</h2>
          <textarea name="attr_mundaneGear" style="height: 5in"></textarea>
          <div class="money">
            <h2 data-i18n="money">Money</h2>
            <div class="centeredH">
              <div class="labelledBoxV">
                <label data-i18n="platinum-pieces-u">PP</label>
                <div class="inner">
                  <input type="number" name="attr_money_pp"/>
                </div>
              </div>
              <div class="labelledBoxV">
                <label data-i18n="gold-pieces-u">GP</label>
                <div class="inner">
                  <input type="number" name="attr_money_gp"/>
                </div>
              </div>
              <div class="labelledBoxV">
                <label data-i18n="silver-pieces-u">SP</label>
                <div class="inner">
                  <input type="number" name="attr_money_sp"/>
                </div>
              </div>
              <div class="labelledBoxV">
                <label data-i18n="copper-pieces-u">CP</label>
                <div class="inner">
                  <input type="number" name="attr_money_cp"/>
                </div>
              </div>
              <div class="labelledBoxV">
                <label data-i18n="bronze-pieces-u">BP</label>
                <div class="inner">
                  <input type="number" name="attr_money_bp"/>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tab magic">
    <div class="tabPanel">
      <div class="magicTab">
        <h2 data-i18n="spellcaster-class">Spellcaster Class</h2>
        <div style="height: 0.5in">
          <div class="labelledBoxH">
            <label data-i18n="caster-level">Caster Level</label>
            <div class="inner">
              <input type="number" name="attr_caster_level" style="width: 0.4in" value="0"/>
            </div>
          </div>
          <div class="labelledBoxH">
            <label data-i18n="ability">Ability</label>
            <div class="inner">
              <select name="attr_caster_ability" style="width: 1in">
                <option value="Choose One" data-i18n="choose-one">Choose One</option>
                <option value="str" data-i18n="strength">Strength</option>
                <option value="dex" data-i18n="dexterity">Dexterity</option>
                <option value="con" data-i18n="constitution">Constitution</option>
                <option value="int" data-i18n="intelligence">Intelligence</option>
                <option value="wis" data-i18n="wisdom">Wisdom</option>
                <option value="cha" data-i18n="charisma">Charisma</option>
              </select>
            </div>
          </div>
          <div class="inlineBlock saveDc" style="vertical-align: top">
            <div class="blackBox" style="font-size: 0.8em">
              <div class="shortname" data-i18n="base-dc">Base DC</div>
            </div>
            <div class="labelledUnderlined">
              <label data-i18n="total">Total</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_spell_dc_base"></span></div>
                <input type="hidden" name="attr_spell_dc_base"/>
              </div>
            </div>
            <div class="mathOperator">= 10 +</div>
            <div class="labelledUnderlined">
              <label data-i18n="ability-mod">Ability Mod</label>
              <div class="inner">
                <div class="readOnlyBox"><span name="attr_spell_dc_ability_mod"></span></div>
                <input type="hidden" name="attr_spell_dc_ability_mod"/>
              </div>
            </div>
            <div class="mathOperator">+</div>
            <div class="fieldBox">
              <label data-i18n="misc">Misc</label>
              <div class="inner">
                <input type="number" name="attr_spell_dc_misc" value="0"/>
              </div>
            </div>
            <div class="labelledUnderlined">
              <label data-i18n="conditional-modifiers">Conditional Modifiers</label>
              <div class="inner">
                <input type="text" name="attr_spell_dc_notes"/>
              </div>
            </div>
          </div>
        </div>
        <div class="specialization">
          <div class="labelledBoxH">
            <label data-i18n="specialty-school-domain">Specialty School/Domain</label>
            <div class="inner">
              <input type="text" name="attr_magic_specialty"/>
            </div>
          </div>
          <div class="labelledBoxH">
            <label data-i18n="restricted-schools">Restricted Schools</label>
            <div class="inner">
              <input type="text" name="attr_magic_restriction"/>
            </div>
          </div>
          <h2 data-i18n="spellbook">Spellbook</h2>
          <div class="spells">
            <div class="inlineBlock" style="float: left; width: 45%">
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level0-spells">Level 0 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_0_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_0_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_0_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel0">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level1-spells">Level 1 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_1_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_1_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_1_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel1">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level2-spells">Level 2 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_2_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_2_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_2_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel2">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level3-spells">Level 3 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_3_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_3_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_3_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel3">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level4-spells">Level 4 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_4_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_4_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_4_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel4">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
            </div>
            <div class="inlineBlock" style="float: right; width: 45%">
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level5-spells">Level 5 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_5_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_5_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_5_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel5">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level6-spells">Level 6 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_6_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_6_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_6_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel6">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level7-spells">Level 7 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_7_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_7_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_7_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel7">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level8-spells">Level 8 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_8_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_8_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_8_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel8">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
                    <div class="spellLevel">
                      <div class="head">
                        <h3 data-i18n="level9-spells">Level 9 Spells</h3>
                        <div class="floatRight">
                          <div class="labelledUnderlined">
                            <label data-i18n="spells-per-day">Spells per day</label>
                            <div class="inner">
                              <input type="number" name="attr_spell_level_9_per_day" style="padding: 0; width: 1in"/>
                            </div>
                          </div>
                          <div class="labelledUnderlined">
                            <label data-i18n="save-dc">Save DC</label>
                            <div class="inner">
                              <div class="readOnlyBox"><span name="attr_spell_level_9_dc"></span></div>
                              <input type="hidden" name="attr_spell_level_9_dc"/>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="body">
                        <fieldset class="repeating_spellslevel9">
                          <!-- Icicle Fall-->
                          <div class="spell card">
                            <div class="head">
                              <div class="prepared" title="Prepared?" data-i18n-title="prepared-title">
                                <input type="checkbox" name="attr_prepared"/>
                                <div data-i18n="prepared-u">P</div>
                              </div>
                              <div class="name">
                                <input type="text" name="attr_name" placeholder="Spell name" data-i18n-placeholder="spell-name-place"/>
                              </div>
                              <div class="school">
                                <select name="attr_school">
                                  <option value="Choose School" data-i18n="choose-school">Choose School</option>
                                  <option value="abjuration" data-i18n="abjuration">Abjuration</option>
                                  <option value="conjuration" data-i18n="conjuration">Conjuration</option>
                                  <option value="divination" data-i18n="divination">Divination</option>
                                  <option value="enchantment" data-i18n="enchantment">Enchantment</option>
                                  <option value="evocation" data-i18n="evocation">Evocation</option>
                                  <option value="illusion" data-i18n="illusion">Illusion</option>
                                  <option value="necromancy" data-i18n="necromancy">Necromancy</option>
                                  <option value="transmutation" data-i18n="transmutation">Transmutation</option>
                                  <option value="universal" data-i18n="universal">Universal</option>
                                </select>
                              </div>
                            </div>
                            <div class="body">
                              <div class="description">
                                <textarea name="attr_description" placeholder="Description" data-i18n-placeholder="description-place"></textarea>
                              </div>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                    </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tab notes">
    <div class="tabPanel">
      <div class="notesTab">
        <textarea name="attr_notes" style="height: 6in"></textarea>
      </div>
    </div>
  </div>
</div>
<script type="text/worker">/**
 * Forces an update on a list of numerical fields, also making sure that
 * any undefined fields are set to 0.
 * @param {string[]} attrs
 * @param {function} cb
 */
function forceUpdate(attrs, cb) {
  parseAttrs(attrs, values => {
    let tempValues = {};
    _.each(attrs, attr => {
      tempValues[attr] = -9999;
    });
    setAttrs(tempValues);
    setAttrs(values);
  });
}

const buttonlist = ["core","skills","specials-feats","equipment","magic","notes"];
buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            sheetTab: button
        });
    });
});


function onChange(attrs, cb) {
  attrs = _.map(attrs, attr => {
    return 'change:' + attr;
  }).join(' ');
  on(attrs, cb);
}

function onChangeParse(attrs, cb) {
  onChange(attrs, () => {
    parseAttrs(attrs, cb);
  });
}

/**
 * Gets the specified attributes and parses them as an integer or 0.
 */
function parseAttrs(attrs, cb) {
  getAttrs(attrs, function(values) {
    _.each(attrs, function(attr) {
      if(_.isUndefined(values[attr]))
        values[attr] = 0;
      else if(!isNaN(values[attr]))
        values[attr] = parseInt(values[attr]);
    });
    cb(values);
  });
}


// Update funcs

function updateAbilityMod(attr, values) {
  var mod = Math.floor((values[attr]+ values[attr + '_temp'] - 10)/2);
  setAttrs({
    [attr + '_mod']: mod
  });
}

function updateSkill(skill, ability, hasArmorPen, values) {
  var total = values[ability + '_mod'] + values[skill + '_ranks'] + values[skill + '_misc'];
  if(hasArmorPen)
    total += values.armor_penalty;
  setAttrs({
    [skill]: total
  });
}


// Change events

// Ability modifiers

onChangeParse(['str', 'str_temp'], values => {
  updateAbilityMod('str', values);
});

onChangeParse(['dex', 'dex_temp'], values => {
  updateAbilityMod('dex', values);
});

onChangeParse(['con', 'con_temp'], values => {
  updateAbilityMod('con', values);
});

onChangeParse(['int', 'int_temp'], values => {
  updateAbilityMod('int', values);
});

onChangeParse(['wis', 'wis_temp'], values => {
  updateAbilityMod('wis', values);
});

onChangeParse(['cha', 'cha_temp'], values => {
  updateAbilityMod('cha', values);
});

// Initiative

onChangeParse(['dex_mod', 'init_misc'], values => {
  setAttrs({
    init: values.dex_mod + values.init_misc
  });
});

// AC

onChangeParse(['ac_equipment', 'dex_mod', 'size', 'ac_misc', 'ac_temp', 'ac_dex_max'], values => {
  setAttrs({
    ac: 10 + values.ac_equipment + Math.min(values.dex_mod, values.ac_dex_max) + values.size + values.ac_misc + values.ac_temp,
    ac_touch: 10 + Math.min(values.dex_mod, values.ac_dex_max) + values.size + values.ac_misc + values.ac_temp,
    ac_flatfoot: 10 + values.ac_equipment + values.size + values.ac_misc + values.ac_temp,
  });
});

// Saving throws

onChangeParse(['fort_base', 'con_mod', 'fort_equipment', 'fort_misc', 'fort_temp'], values => {
  setAttrs({
    fort: values.fort_base + values.con_mod + values.fort_equipment + values.fort_misc + values.fort_temp
  });
});

onChangeParse(['ref_base', 'dex_mod', 'ref_equipment', 'ref_misc', 'ref_temp'], values => {
  setAttrs({
    ref: values.ref_base + values.dex_mod + values.ref_equipment + values.ref_misc + values.ref_temp
  });
});

onChangeParse(['will_base', 'wis_mod', 'will_equipment', 'will_misc', 'will_temp'], values => {
  setAttrs({
    will: values.will_base + values.wis_mod + values.will_equipment + values.will_misc + values.will_temp
  });
});


// Attacks
onChangeParse(['bab', 'size'], values => {
  getSectionIDs('repeating_attacks', ids => {
    _.each(ids, id => {
      var prefix = 'repeating_attacks_' + id + '_';

      setAttrs({
        [prefix + 'attack_bab']: values.bab,
        [prefix + 'attack_size']: values.size
      });
    });
  });
});

onChangeParse(['str_mod', 'dex_mod', 'con_mod', 'int_mod', 'wis_mod', 'cha_mod'], values => {
  getSectionIDs('repeating_attacks', ids => {
    _.each(ids, id => {
      var prefix = 'repeating_attacks_' + id + '_attack';
      var repAbility = 'repeating_attacks_' + id + '_attack_ability';

      var attrNames = _.map(['ability'], name => {
        return prefix + '_' + name;
      });
      parseAttrs(attrNames, attackValues => {
        var abilityModName = attackValues[repAbility] + '_mod';

        setAttrs({
          [prefix + '_ability_mod']: values[abilityModName]
        });
      });
    });
  });
});

var testCounter = 0;

on('change:repeating_attacks', (evt) => {
  forceUpdate(['bab', 'size']);
  testCounter++;
  setAttrs({debug: testCounter})

  getSectionIDs('repeating_attacks', ids => {
    _.each(ids, id => {
      var prefix = 'repeating_attacks_' + id + '_attack';
      var repAbility = 'repeating_attacks_' + id + '_attack_ability';

      var attrNames = _.map(['ability', 'bab', 'ability_mod', 'size', 'equipment', 'misc', 'temp'], name => {
        return prefix + '_' + name;
      });
      attrNames = attrNames.concat(['str_mod', 'dex_mod', 'con_mod', 'int_mod', 'wis_mod', 'cha_mod']);
      parseAttrs(attrNames, values => {
        var abilityModName = values[repAbility] + '_mod';

        setAttrs({
          [prefix]: values[prefix + '_bab'] + values[abilityModName] + values[prefix + '_size'] + values[prefix + '_equipment'] + values[prefix + '_misc'] + values[prefix + '_temp'],
          [prefix + '_ability_mod']: values[abilityModName]
        }, { silent: true });
      });
    });
  });
});

// SKILLS
var skills2 = [
  { skill: 'acrobatics', ability: 'dex', armorPenalty: 1 },
  { skill: 'athletics', ability: 'str', armorPenalty: 1 },
  { skill: 'appraise', ability: 'int', armorPenalty: 0 },
  { skill: 'bluff', ability: 'cha', armorPenalty: 0 },
  { skill: 'concentration', ability: 'con', armorPenalty: 0 },
  { skill: 'craft', ability: 'int', armorPenalty: 0 },
  { skill: 'diplomacy', ability: 'cha', armorPenalty: 0 },
  { skill: 'disable_device', ability: 'dex', armorPenalty: 1 },
  { skill: 'disguise', ability: 'cha', armorPenalty: 0 },
  { skill: 'escape_artist', ability: 'dex', armorPenalty: 1 },
  { skill: 'fly', ability: 'dex', armorPenalty: 1 },
  { skill: 'handle_animal', ability: 'cha', armorPenalty: 0 },
  { skill: 'heal', ability: 'wis', armorPenalty: 0 },
  { skill: 'intimidate', ability: 'cha', armorPenalty: 0 },
  { skill: 'knowledge_arcana', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_dungeoneering', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_engineering', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_geography', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_history', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_local', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_nature', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_nobility', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_planes', ability: 'int', armorPenalty: 0 },
  { skill: 'knowledge_religion', ability: 'int', armorPenalty: 0 },
  { skill: 'linguistics', ability: 'int', armorPenalty: 0 },
  { skill: 'perception', ability: 'wis', armorPenalty: 0 },
  { skill: 'perform', ability: 'cha', armorPenalty: 0 },
  { skill: 'profession', ability: 'wis', armorPenalty: 0 },
  { skill: 'ride', ability: 'dex', armorPenalty: 1 },
  { skill: 'sense_motive', ability: 'wis', armorPenalty: 0 },
  { skill: 'sleight_of_hand', ability: 'dex', armorPenalty: 1 },
  { skill: 'spellcraft', ability: 'int', armorPenalty: 0 },
  { skill: 'stealth', ability: 'dex', armorPenalty: 1 },
  { skill: 'survival', ability: 'wis', armorPenalty: 0 },
  { skill: 'use_magic_device', ability: 'cha', armorPenalty: 0 },
];
onChangeParse(['armor_penalty'], values => {
  getSectionIDs('repeating_skills', ids => {
    _.each(ids, id => {
      var prefix = 'repeating_skills_' + id + '_';

      setAttrs({
        [prefix + 'skill_armor_penalty']: values.armor_penalty
      });
    });
  });
});

onChangeParse(['str_mod', 'dex_mod', 'con_mod', 'int_mod', 'wis_mod', 'cha_mod'], values => {
  getSectionIDs('repeating_skills', ids => {
    _.each(ids, id => {
      var prefix = 'repeating_skills_' + id + '_skill';
      var repAbility = 'repeating_skills_' + id + '_skill_ability';

      var attrNames = _.map(['ability'], name => {
        return prefix + '_' + name;
      });
      parseAttrs(attrNames, attackValues => {
        var abilityModName = attackValues[repAbility] + '_mod';
        setAttrs({
          [prefix + '_ability_mod']: values[abilityModName]
        });
      });
    });
  });
});

on('change:repeating_skills', (evt) => {
  forceUpdate(['armor_penalty']);
  getSectionIDs('repeating_skills', ids => {
    _.each(ids, id => {
      var prefix = 'repeating_skills_' + id + '_skill';
      var repAbility = 'repeating_skills_' + id + '_skill_ability';

      var attrNames = _.map(['ability', 'ranks', 'ability_mod', 'misc', 'doubles', 'ACP', 'armor_penalty'], name => {
        return prefix + '_' + name;
      });
      attrNames = attrNames.concat(['str_mod', 'dex_mod', 'con_mod', 'int_mod', 'wis_mod', 'cha_mod']);
      parseAttrs(attrNames, values => {
        var abilityModName = values[repAbility] + '_mod';
        let acp = 0;
        if (values[prefix + '_ACP']) {
          acp = values[prefix + '_armor_penalty'];
        }

        setAttrs({
          [prefix]: values[prefix + '_ranks'] + values[abilityModName] + values[prefix + '_misc'] + values[prefix + '_doubles'] + acp,
          [prefix + '_ability_mod']: values[abilityModName]
        }, { silent: true });
      });
    });
  });
});

var skills2Name = [
  'acrobatics', 'acrobatics_ranks', 'acrobatics_misc', 'acrobatics_notes',
  'athletics', 'athletics_ranks', 'athletics_misc', 'athletics_notes',
  'appraise', 'appraise_ranks', 'appraise_misc', 'appraise_notes',
  'bluff', 'bluff_ranks', 'bluff_misc', 'bluff_notes',
  'concentration', 'concentration_ranks', 'concentration_misc', 'concentration_notes',
  'craft1', 'craft1_ranks', 'craft1_misc', 'craft1_notes',
  'craft2', 'craft2_ranks', 'craft2_misc', 'craft2_notes',
  'craft3', 'craft3_ranks', 'craft3_misc', 'craft3_notes',
  'craft4', 'craft4_ranks', 'craft4_misc', 'craft4_notes',
  'craft5', 'craft5_ranks', 'craft5_misc', 'craft5_notes',
  'diplomacy', 'diplomacy_ranks', 'diplomacy_misc', 'diplomacy_notes',
  'disable_device', 'disable_device_ranks', 'disable_device_misc', 'disable_device_notes',
  'disguise', 'disguise_ranks', 'disguise_misc', 'disguise_notes',
  'escape_artist', 'escape_artist_ranks', 'escape_artist_misc', 'escape_artist_notes',
  'fly', 'fly_ranks', 'fly_misc', 'fly_notes',
  'handle_animal', 'handle_animal_ranks', 'handle_animal_misc', 'handle_animal_notes',
  'heal', 'heal_ranks', 'heal_misc', 'heal_notes',
  'intimidate', 'intimidate_ranks', 'intimidate_misc', 'intimidate_notes',
  'knowledge_arcana', 'knowledge_arcana_ranks', 'knowledge_arcana_misc', 'knowledge_arcana_notes',
  'knowledge_dungeoneering', 'knowledge_dungeoneering_ranks', 'knowledge_dungeoneering_misc', 'knowledge_dungeoneering_notes',
  'knowledge_engineering', 'knowledge_engineering_ranks', 'knowledge_engineering_misc', 'knowledge_engineering_notes',
  'knowledge_geography', 'knowledge_geography_ranks', 'knowledge_geography_misc', 'knowledge_geography_notes',
  'knowledge_history', 'knowledge_history_ranks', 'knowledge_history_misc', 'knowledge_history_notes',
  'knowledge_local', 'knowledge_local_ranks', 'knowledge_local_misc', 'knowledge_local_notes',
  'knowledge_nature', 'knowledge_nature_ranks', 'knowledge_nature_misc', 'knowledge_nature_notes',
  'knowledge_nobility', 'knowledge_nobility_ranks', 'knowledge_nobility_misc', 'knowledge_nobility_notes',
  'knowledge_planes', 'knowledge_planes_ranks', 'knowledge_planes_misc', 'knowledge_planes_notes',
  'knowledge_religion', 'knowledge_religion_ranks', 'knowledge_religion_misc', 'knowledge_religion_notes',
  'knowledge1', 'knowledge1_ranks', 'knowledge1_misc', 'knowledge1_notes',
  'knowledge2', 'knowledge2_ranks', 'knowledge2_misc', 'knowledge2_notes',
  'knowledge3', 'knowledge3_ranks', 'knowledge3_misc', 'knowledge3_notes',
  'knowledge4', 'knowledge4_ranks', 'knowledge4_misc', 'knowledge4_notes',
  'knowledge5', 'knowledge5_ranks', 'knowledge5_misc', 'knowledge5_notes',
  'linguistics', 'linguistics_ranks', 'linguistics_misc', 'linguistics_notes',
  'perception', 'perception_ranks', 'perception_misc', 'perception_notes',
  'perform1', 'perform1_ranks', 'perform1_misc', 'perform1_notes',
  'perform2', 'perform2_ranks', 'perform2_misc', 'perform2_notes',
  'perform3', 'perform3_ranks', 'perform3_misc', 'perform3_notes',
  'perform4', 'perform4_ranks', 'perform4_misc', 'perform4_notes',
  'perform5', 'perform5_ranks', 'perform5_misc', 'perform5_notes',
  'profession1', 'profession1_ranks', 'profession1_misc', 'profession1_notes',
  'profession2', 'profession2_ranks', 'profession2_misc', 'profession2_notes',
  'profession3', 'profession3_ranks', 'profession3_misc', 'profession3_notes',
  'profession4', 'profession4_ranks', 'profession4_misc', 'profession4_notes',
  'profession5', 'profession5_ranks', 'profession5_misc', 'profession5_notes',
  'ride', 'ride_ranks', 'ride_misc', 'ride_notes',
  'sense_motive', 'sense_motive_ranks', 'sense_motive_misc', 'sense_motive_notes',
  'sleight_of_hand', 'sleight_of_hand_ranks', 'sleight_of_hand_misc', 'sleight_of_hand_notes',
  'spellcraft', 'spellcraft_ranks', 'spellcraft_misc', 'spellcraft_notes',
  'stealth', 'stealth_ranks', 'stealth_misc', 'stealth_notes',
  'survival', 'survival_ranks', 'survival_misc', 'survival_notes',
  'use_magic_device', 'use_magic_device_ranks', 'use_magic_device_misc', 'use_magic_device_notes',
  'generic1', 'generic1_ranks', 'generic1_misc', 'generic1_notes',
  'generic2', 'generic2_ranks', 'generic2_misc', 'generic2_notes',
  'generic3', 'generic3_ranks', 'generic3_misc', 'generic3_notes',
  'generic4', 'generic4_ranks', 'generic4_misc', 'generic4_notes',
  'generic5', 'generic5_ranks', 'generic5_misc', 'generic5_notes',
  'generic6', 'generic6_ranks', 'generic6_misc', 'generic6_notes',
  'generic7', 'generic7_ranks', 'generic7_misc', 'generic7_notes',
  'generic8', 'generic8_ranks', 'generic8_misc', 'generic8_notes',
  'generic9', 'generic9_ranks', 'generic9_misc', 'generic9_notes',
  'generic10', 'generic10_ranks', 'generic10_misc', 'generic10_notes',
  'generic11', 'generic11_ranks', 'generic11_misc', 'generic11_notes',
  'generic12', 'generic12_ranks', 'generic12_misc', 'generic12_notes',
  'check_skills_set'
];

skillOriginal = [
'acrobatics',
'athletics',
'appraise',
'bluff',
'concentration',
'craft1',
'craft2',
'craft3',
'craft4',
'craft5',
'diplomacy',
'disable_device',
'disguise',
'escape_artist',
'fly',
'handle_animal',
'heal',
'intimidate',
'knowledge_arcana',
'knowledge_dungeoneering',
'knowledge_engineering',
'knowledge_geography',
'knowledge_history',
'knowledge_local',
'knowledge_nature',
'knowledge_nobility',
'knowledge_planes',
'knowledge_religion',
'knowledge1',
'knowledge2',
'knowledge3',
'knowledge4',
'knowledge5',
'linguistics',
'perception',
'perform1',
'perform2',
'perform3',
'perform4',
'perform5',
'profession1',
'profession2',
'profession3',
'profession4',
'profession5',
'ride',
'sense_motive',
'sleight_of_hand',
'spellcraft',
'stealth',
'survival',
'use_magic_device',
'generic1',
'generic2',
'generic3',
'generic4',
'generic5',
'generic6',
'generic7',
'generic8',
'generic9',
'generic10',
'generic11',
'generic12',
];

function addAllSkills() {
  console.log("HELLO");

  getAttrs(skills2Name, function(v) {
    const settings = {};  //create an object to store the new rows
    for (i=0; i<skills2.length; i++) {  // loop a number of times equal to the rows.
      console.log("test");
      const newrowid = generateRowID();		        
      settings["repeating_skills_" + newrowid + "_skill_name"] = skills2[i].skill;
      settings["repeating_skills_" + newrowid + "_skill_ability"] = skills2[i].ability;
      settings["repeating_skills_" + newrowid + "_skill_acp"] = skills2[i].armorPenalty;
    }
    setAttrs(settings);
  });
}

function importSkills() {
  getAttrs(skills2Name, function(v) {
    const settings = {};  //create an object to store the new rows
    for (i=0; i<skills.length; i++) {  // loop a number of times equal to the rows.
      if ((v[skills[i].skill+"_ranks"] != undefined || v[skills[i].skill+"_misc"] != undefined || v[skills[i].skill+"_notes"] != undefined)) {       
        const newrowid = generateRowID(); 
        settings["repeating_skills_" + newrowid + "_skill_name"] = skills[i].skill;
        settings["repeating_skills_" + newrowid + "_skill_ability"] = skills[i].ability;
        settings["repeating_skills_" + newrowid + "_skill_acp"] = skills[i].armorPenalty;
        settings["repeating_skills_" + newrowid + "_skill_ranks"] = (v[skills[i].skill+"_ranks"] || 0);
        settings["repeating_skills_" + newrowid + "_skill_misc"] = (v[skills[i].skill+"_misc"] || 0);
        settings["repeating_skills_" + newrowid + "_skill_notes"] = (v[skills[i].skill+"_notes"] || "");
      }
    }
    setAttrs(settings);
  });
}

const skillImport = ["skillImport"];
skillImport.forEach(button => {
  on(`clicked:${button}`, function() {
    importSkills();
  });
});

const skillAddAll = ["addAllSkills"];
skillAddAll.forEach(button => {
  on(`clicked:${button}`, function() {
    addAllSkills();
  });
});

// CMB/CMD

onChangeParse(['size'], values => {
  setAttrs({
    cmb_size: -values.size,
    cmd_size: -values.size
  });
});

onChangeParse(['bab', 'str_mod', 'cmb_size', 'cmb_misc', 'cmb_temp'], values => {
  setAttrs({
    cmb: values.bab + values.str_mod + values.cmb_size + values.cmb_misc + values.cmb_temp
  });
});

onChangeParse(['bab', 'str_mod', 'dex_mod', 'cmd_size', 'cmd_misc', 'cmd_temp'], values => {
  setAttrs({
    cmd: 10 + values.bab + values.str_mod + values.dex_mod + values.cmd_size + values.cmd_misc + values.cmd_temp
  });
});

// Skills

var skills = [
  { skill: 'acrobatics', ability: 'dex', armorPenalty: true },
  { skill: 'athletics', ability: 'str', armorPenalty: true },
  { skill: 'appraise', ability: 'int', armorPenalty: false },
  { skill: 'bluff', ability: 'cha', armorPenalty: false },
  { skill: 'concentration', ability: 'con', armorPenalty: false },
  { skill: 'craft1', ability: 'int', armorPenalty: false },
  { skill: 'craft2', ability: 'int', armorPenalty: false },
  { skill: 'craft3', ability: 'int', armorPenalty: false },
  { skill: 'craft4', ability: 'int', armorPenalty: false },
  { skill: 'craft5', ability: 'int', armorPenalty: false },
  { skill: 'diplomacy', ability: 'cha', armorPenalty: false },
  { skill: 'disable_device', ability: 'dex', armorPenalty: true },
  { skill: 'disguise', ability: 'cha', armorPenalty: false },
  { skill: 'escape_artist', ability: 'dex', armorPenalty: true },
  { skill: 'fly', ability: 'dex', armorPenalty: true },
  { skill: 'handle_animal', ability: 'cha', armorPenalty: false },
  { skill: 'heal', ability: 'wis', armorPenalty: false },
  { skill: 'intimidate', ability: 'cha', armorPenalty: false },
  { skill: 'knowledge_arcana', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_dungeoneering', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_engineering', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_geography', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_history', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_local', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_nature', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_nobility', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_planes', ability: 'int', armorPenalty: false },
  { skill: 'knowledge_religion', ability: 'int', armorPenalty: false },
  { skill: 'knowledge1', ability: 'int', armorPenalty: false },
  { skill: 'knowledge2', ability: 'int', armorPenalty: false },
  { skill: 'knowledge3', ability: 'int', armorPenalty: false },
  { skill: 'knowledge4', ability: 'int', armorPenalty: false },
  { skill: 'knowledge5', ability: 'int', armorPenalty: false },
  { skill: 'linguistics', ability: 'int', armorPenalty: false },
  { skill: 'perception', ability: 'wis', armorPenalty: false },
  { skill: 'perform1', ability: 'cha', armorPenalty: false },
  { skill: 'perform2', ability: 'cha', armorPenalty: false },
  { skill: 'perform3', ability: 'cha', armorPenalty: false },
  { skill: 'perform4', ability: 'cha', armorPenalty: false },
  { skill: 'perform5', ability: 'cha', armorPenalty: false },
  { skill: 'profession1', ability: 'wis', armorPenalty: false },
  { skill: 'profession2', ability: 'wis', armorPenalty: false },
  { skill: 'profession3', ability: 'wis', armorPenalty: false },
  { skill: 'profession4', ability: 'wis', armorPenalty: false },
  { skill: 'profession5', ability: 'wis', armorPenalty: false },
  { skill: 'ride', ability: 'dex', armorPenalty: true },
  { skill: 'sense_motive', ability: 'wis', armorPenalty: false },
  { skill: 'sleight_of_hand', ability: 'dex', armorPenalty: true },
  { skill: 'spellcraft', ability: 'int', armorPenalty: false },
  { skill: 'stealth', ability: 'dex', armorPenalty: true },
  { skill: 'survival', ability: 'wis', armorPenalty: false },
  { skill: 'use_magic_device', ability: 'cha', armorPenalty: false },
  { skill: 'generic1', ability: 'str', armorPenalty: true },
  { skill: 'generic2', ability: 'str', armorPenalty: true },
  { skill: 'generic3', ability: 'dex', armorPenalty: true },
  { skill: 'generic4', ability: 'dex', armorPenalty: true },
  { skill: 'generic5', ability: 'con', armorPenalty: false },
  { skill: 'generic6', ability: 'con', armorPenalty: false },
  { skill: 'generic7', ability: 'int', armorPenalty: false },
  { skill: 'generic8', ability: 'int', armorPenalty: false },
  { skill: 'generic9', ability: 'wis', armorPenalty: false },
  { skill: 'generic10', ability: 'wis', armorPenalty: false },
  { skill: 'generic11', ability: 'cha', armorPenalty: false },
  { skill: 'generic12', ability: 'cha', armorPenalty: false },
];
_.each(skills, skillTuple => {
  var skill = skillTuple.skill
  var ability = skillTuple.ability;
  var hasArmorPen = skillTuple.armorPenalty;
  onChangeParse([skill + '_class', ability + '_mod', skill + '_ranks', skill + '_misc', 'armor_penalty'], values => {
    updateSkill(skill, ability, hasArmorPen, values);
  });
});


onChange(['caster_ability', 'str_mod', 'dex_mod', 'con_mod', 'int_mod', 'wis_mod', 'cha_mod'], () => {
  getAttrs(['caster_ability'], values => {
    var caster_ability = values.caster_ability;
    parseAttrs([caster_ability + '_mod'], values => {
      setAttrs({
        spell_dc_ability_mod: values[caster_ability + '_mod']
      });
    });
  });
});

onChangeParse(['spell_dc_ability_mod', 'spell_dc_misc'], values => {
  setAttrs({
    spell_dc_base: 10 + values.spell_dc_ability_mod + values.spell_dc_misc
  });
});

onChangeParse(['spell_dc_base'], values => {
  setAttrs({
    spell_level_0_dc: values.spell_dc_base,
    spell_level_1_dc: values.spell_dc_base + 1,
    spell_level_2_dc: values.spell_dc_base + 2,
    spell_level_3_dc: values.spell_dc_base + 3,
    spell_level_4_dc: values.spell_dc_base + 4,
    spell_level_5_dc: values.spell_dc_base + 5,
    spell_level_6_dc: values.spell_dc_base + 6,
    spell_level_7_dc: values.spell_dc_base + 7,
    spell_level_8_dc: values.spell_dc_base + 8,
    spell_level_9_dc: values.spell_dc_base + 9
  });
});



on('sheet:opened', () => {
  setAttrs({
    character_sheet: 'Adversay v1.0.0'
  });

  forceUpdate([
    'str', 'dex', 'con', 'int', 'wis', 'cha',
    'bab', 'size'
  ]);

  
});

</script>
<rolltemplate class="sheet-rolltemplate-pf">
  <table>
    <thead>
      <tr>
        <th>{{charName}} &#x21D2; {{attr}}</th>
      </tr>
    </thead>
    <tbody>{{#isAttack}}{{#rollWasCrit() result}}
          <tr>
            <td>
              <h3 class="crit" data-i18n="critical-hit-tpl">Critical Hit! {{result}}</h3>
            </td>
          </tr>
          <tr>
            <td data-i18n="roll-to-confirm-tpl">Roll to Confirm {{critConfirm}}</td>
          </tr>{{/rollWasCrit() result}}{{#^rollWasCrit() result}}
          <tr>
            <td data-i18n="attack-tpl">Attack {{result}}</td>
          </tr>{{/^rollWasCrit() result}}
        <tr>
          <td>
            <hr/>
          </td>
        </tr>
          <tr>
            <td data-i18n="damage-tpl">Damage {{damage}}</td>
          </tr>{{#rollWasCrit() result}}
          <tr>
            <td >Damage Multiplier {{critMultiplier}}</td>
          </tr>{{/rollWasCrit() result}}{{#notes}}
          <tr>
            <td class="notes">
              <div data-i18n="notes-tpl">Notes:</div>
              <div>{{notes}}</div>
            </td>
          </tr>{{/notes}}{{/isAttack}}{{#isNotAttack}}
        <tr>
          <td data-i18n="result-tpl">Result {{result}}</td>
        </tr>{{#notes}}
          <tr>
            <td class="notes">
              <div data-i18n="notes-tpl">Notes:</div>
              <div>{{notes}}</div>
            </td>
          </tr>{{/notes}}{{/isNotAttack}}
    </tbody>
  </table>
</rolltemplate>